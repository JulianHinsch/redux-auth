(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports={signup_form:"Signup_signup_form__2IOMG",validation_err_msg:"Signup_validation_err_msg__1HGTU",message:"Signup_message__1YubF"}},28:function(e,t,a){e.exports={login_form:"Login_login_form__gyF7Q",validation_err_msg:"Login_validation_err_msg__2PPAS",message:"Login_message__24Ztl"}},29:function(e,t,a){e.exports={header:"Header_header__1x3CZ",logo:"Header_logo__1o5Ro"}},40:function(e,t,a){e.exports={landing:"Landing_landing__2aCJm"}},42:function(e,t,a){e.exports={profile:"Profile_profile__1e0S1"}},43:function(e,t,a){e.exports={avatar:"Avatar_avatar__glg4n"}},44:function(e,t,a){e.exports={not_found:"NotFound_not_found__2jb5_"}},45:function(e,t,a){e.exports={app:"App_app__33z-c"}},50:function(e,t,a){e.exports=a(80)},60:function(e,t,a){e.exports=a.p+"static/media/home.9a79fb64.svg"},61:function(e,t,a){e.exports=a.p+"static/media/logout.ba50176f.svg"},62:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),i=a.n(o),c=a(2),l=a(10),s="[Auth]",u="".concat(s," LOG_IN"),m="".concat(s," SIGN_UP"),d="".concat(s," LOG_OUT"),p="".concat(s," GET"),h="".concat(s," SET"),f=function(e){var t=e.auth;return{type:h,payload:t,meta:{feature:s}}},g=a(14),E=a(15),v=a(17),b=a(16),_=a(18),w=a(8),y=a(40),O=a.n(y),S=function(){return r.a.createElement("main",{className:O.a.landing},r.a.createElement("h1",null,"Welcome!"),r.a.createElement("p",null,"Please ",r.a.createElement(w.a,{to:"/signup"},"sign up")," or ",r.a.createElement(w.a,{to:"/login"},"log in"),"!"))},A=a(12),j=a(28),N=a.n(j),C=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",canSubmit:!1},a.handleSubmit=function(e){e.preventDefault();var t,n=a.state,r=n.email,o=n.password,i=(t=a.props,["location","state","from","pathname"].reduce(function(e,t){return e&&e[t]?e[t]:null},t));a.props.logIn({email:r,password:o},i)},a.handleChange=function(e){a.setState(Object(A.a)({},e.target.name,e.target.value),function(){var e=a.state,t=e.email,n=e.password;a.setState({canSubmit:[t,n].every(function(e){return""!==e})})})},a}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){document.title="Log In",this.props.setAuth({message:null})}},{key:"render",value:function(){return r.a.createElement("main",{className:N.a.login_form},r.a.createElement("h1",null,"Log In"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{name:"email",type:"text",required:!0,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password",required:!0},"Password"),r.a.createElement("input",{name:"password",type:"password",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",disabled:!this.state.canSubmit},"Log In")),this.props.message&&r.a.createElement("div",{className:N.a.message},this.props.message))}}]),t}(n.Component),T=Object(c.b)(function(e,t){return{message:e.auth.message}},function(e,t){return{logIn:function(t,a){return e(function(e){var t=e.credentials,a=e.redirectTo;return{type:u,payload:t,meta:{redirectTo:a}}}({credentials:t,redirectTo:a}))},setAuth:function(t){return e(f({auth:t}))}}})(C),P=function(e){return""===(e=e.trim())?"This field cannot be empty":/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?"":"Please enter a valid email"},k=function(e){return""===(e=e.trim())?"This field cannot be empty":/^[A-Za-z ]+(-[ A-Za-z]+)*$/.test(e)?"":"Please enter a valid name"},L=function(e){return""===(e=e.trim())?"This field cannot be empty":/\s/g.test(e)?"Password cannot contain spaces":e.length<12?"Password must be at least 12 characters":e.length>50?"Password cannot be greater than 50 characters":e.toUpperCase()===e?"Password must contain a lowercase character":e.toLowerCase()===e?"Password must contain an uppercase character":/\d/.test(e)?/[-!$%^&*()_+|~=`{}[\]:";'<>?,.\/]/.test(e)?"":"Password must contain a special character":"Password must contain a number"},x=a(13),I=a.n(x),R=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",firstNameErrMsg:"",lastName:"",lastNameErrMsg:"",email:"",emailErrMsg:"",password:"",passwordErrMsg:"",canSubmit:!1},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.firstName,r=t.lastName,o=t.email,i=t.password;a.props.signUp({name:"".concat(n," ").concat(r),email:o,password:i})},a.handleChange=function(e){var t,n=e.target.name,r=e.target.value;a.setState((t={},Object(A.a)(t,n,r),Object(A.a)(t,"".concat(n,"ErrMsg"),a.getErrMsg(n,r)),t),function(){a.setState({canSubmit:a.validateForm()})})},a.getErrMsg=function(e,t){var a={email:P,firstName:k,lastName:k,password:L}[e];return a?a(t):""},a.validateForm=function(){return Object.keys(a.state).every(function(e){return e.includes("ErrMsg")?""===a.state[e]:""!==a.state[e]})},a}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){document.title="Sign Up",this.props.setAuth({message:null})}},{key:"render",value:function(){return r.a.createElement("main",{className:I.a.signup_form},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{name:"firstName",type:"text",required:!0,onChange:this.handleChange}),r.a.createElement("span",{className:I.a.validation_err_msg},this.state.firstNameErrMsg)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{name:"lastName",type:"text",required:!0,onChange:this.handleChange}),r.a.createElement("span",{className:I.a.validation_err_msg},this.state.lastNameErrMsg)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{name:"email",type:"email",required:!0,onChange:this.handleChange}),r.a.createElement("span",{className:I.a.validation_err_msg},this.state.emailErrMsg)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{name:"password",type:"password",required:!0,onChange:this.handleChange}),r.a.createElement("span",{className:I.a.validation_err_msg},this.state.passwordErrMsg)),r.a.createElement("button",{type:"submit",disabled:!this.state.canSubmit},"Sign Up")),this.props.message&&r.a.createElement("div",{className:I.a.message},this.props.message))}}]),t}(n.Component),U=Object(c.b)(function(e,t){return{message:e.auth.message}},function(e,t){return{signUp:function(t){return e(function(e){var t=e.user;return{type:m,payload:t}}({user:t}))},setAuth:function(t){return e(f({auth:t}))}}})(R),M=a(42),F=a.n(M),H=a(43),W=a.n(H),q=function(e){var t=e.emailHash;return r.a.createElement("div",{style:{backgroundImage:"url(https://www.gravatar.com/avatar/".concat(t,")"),backgroundSize:"cover"},className:W.a.avatar})},z=function(e){var t=e.auth;return r.a.createElement("main",{className:F.a.profile},r.a.createElement(q,{emailHash:t.emailHash}),r.a.createElement("h1",null,t.name))},G=Object(c.b)(function(e,t){return{auth:e.auth}},null)(z),Z=a(44),J=a.n(Z),$=function(){return r.a.createElement("main",{className:J.a.not_found},r.a.createElement("h1",null,"404!"),r.a.createElement("p",null,"The page you're looking for can't be found."))},D=Object(l.f)(Object(c.b)(function(e,t){return{auth:e.auth}},null)(function(e){var t=e.auth;return r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return t.isAuthenticated?r.a.createElement(G,null):r.a.createElement(S,null)}}),r.a.createElement(l.a,{path:"/login",render:function(e){return r.a.createElement(T,{location:e.location})}}),r.a.createElement(l.a,{path:"/signup",render:function(){return r.a.createElement(U,null)}}),r.a.createElement(l.a,{component:$}))})),Q=a(29),B=a.n(Q),Y=function(e){var t=e.auth,n=e.logOut;return r.a.createElement("header",{className:B.a.header},r.a.createElement("nav",null,r.a.createElement(w.a,{to:"/",className:B.a.logo,title:"Home"},r.a.createElement("img",{src:a(60),alt:"Home"})),t.isAuthenticated?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("img",{onClick:n,src:a(61),alt:"Log Out",title:"Log Out"}))):r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(w.a,{to:"/signup"},"Sign Up")),r.a.createElement("li",null,r.a.createElement(w.a,{to:"/login"},"Log In")))))},K=Object(c.b)(function(e,t){return{auth:e.auth}},function(e,t){return{logOut:function(){return e({type:d})}}})(Y),V=(a(62),a(45)),X=a.n(V),ee=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){this.props.getAuth()}},{key:"render",value:function(){return r.a.createElement("div",{className:X.a.app},r.a.createElement(K,null),r.a.createElement(D,null))}}]),t}(n.Component),te=Object(l.f)(Object(c.b)(null,function(e,t){return{getAuth:function(){return e({type:p})}}},null)(ee)),ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var re=a(11),oe=a(46),ie={id:null,isAuthenticated:!1,name:null,emailHash:null,message:null},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var a=t.payload;return Object(oe.a)({},e,a);default:return e}},le=function(e,t){return"CLEAR_STORE"===t.type&&(e=void 0),Object(re.c)({auth:ce})(e,t)},se=a(47),ue=a(48),me=a.n(ue),de=function(e){var t=e.data,a=e.method,n=e.url,r=e.timeout,o=e.feature,i=e.redirectTo;return{type:"".concat(o," ").concat("API_REQUEST"),payload:t,meta:{method:a,url:n,timeout:r,feature:o,redirectTo:i}}},pe=a(49),he=a.n(pe),fe=a(3),ge=Object(fe.a)(),Ee=[function(e){e.dispatch;return function(e){return function(t){switch(e(t),t.type){case u:var a=t.payload,n=t.meta.redirectTo;e(de({data:a,method:"POST",url:"/login",timeout:3e3,feature:s,redirectTo:n}));break;case m:var r=t.payload;e(de({data:r,method:"POST",url:"/signup",timeout:3e3,feature:s,redirectTo:null}));break;case d:e(de({data:null,method:"POST",url:"/logout",timeout:3e3,feature:s,redirectTo:null}));break;case"".concat(s," ").concat("API_ERROR"):var o=["payload","response","data","message"].reduce(function(e,t){return e&&e[t]?e[t]:null},t);e(f({auth:{message:o}}));break;case"".concat(s," ").concat("API_SUCCESS"):case p:var i=me.a.get("jwt_payload");if(i){var c=JSON.parse(window.atob(i)),l=c.id,h=c.name,g=c.emailHash;if(1e3*c.exp>(new Date).getTime()){e(f({auth:{id:l,name:h,emailHash:g,isAuthenticated:!0,message:null}}));break}}e({type:"CLEAR_STORE"})}}}}],ve=[function(e){var t=e.dispatch;return function(e){return function(a){if(e(a),a.type.includes("API_REQUEST")){var n=a.meta,r=n.url,o=n.method,i=n.timeout,c=n.feature,l=n.redirectTo,s=a.payload;he()("".concat("","/").concat("/"===r.charAt(0)?r.slice(1):r),{method:o,headers:{"Content-Type":"application/json"},withCredentials:!1,timeout:i,data:s}).then(function(e){return t(function(e){var t=e.response,a=e.feature,n=e.redirectTo;return{type:"".concat(a," ").concat("API_SUCCESS"),payload:t,meta:{feature:a,redirectTo:n}}}({response:e.data,feature:c,redirectTo:l}))}).catch(function(e){return t(function(e){var t=e.error,a=e.feature;return{type:"".concat(a," ").concat("API_ERROR"),payload:t,meta:{feature:a}}}({error:e,feature:c}))})}}}},function(e){e.dispatch;return function(e){return function(t){switch(e(t),t.type){case"".concat(s," ").concat("API_SUCCESS"):ge.push(t.meta.redirectTo||"/");break;case"CLEAR_STORE":ge.push("/")}}}},function(e){e.dispatch;return function(e){return function(t){Array.isArray(t)?t.forEach(function(t){return e(t)}):e(t)}}},Object(se.createLogger)({collapsed:!0})],be=Object(re.d)(le,re.a.apply(void 0,Ee.concat(ve)));i.a.render(r.a.createElement(c.a,{store:be},r.a.createElement(l.b,{history:ge},r.a.createElement(te,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");ae?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ne(t,e)})}}()}},[[50,1,2]]]);
//# sourceMappingURL=main.0d85c4de.chunk.js.map